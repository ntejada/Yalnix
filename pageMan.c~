







// Store frame list in kernel heap.                                                                                                                                                                                                          
int
availableFramesListInit() {
  int top_frame = (PMEM_LIMIT-PMEM_BASE) / PAGESIZE;
  int first_frame = VMEM_0_LIMIT >> PAGESHIFT;

  int number_of_frames = top_frame - first_frame;

  frame_list  = (int *)malloc(number_of_frames * sizeof(int));

  if (frame_list == NULL) {
    TracePrintf(1, "Malloc error, availableFramesListInit\n");
    return ERROR;
  }

  int i;
  for (i = 0; i < number_of_frames; i++)
    frame_list[i] = i + first_frame; // Mark all as available                                                                                                                                                                                 

  return SUCCESS;
}
